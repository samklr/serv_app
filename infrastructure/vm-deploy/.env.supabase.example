# ============================================
# Servantin VM Deployment - Supabase Configuration
# Copy this file to .env and configure values
# ============================================
# This configuration uses Supabase PostgreSQL instead of local PostgreSQL
# Supabase free tier ONLY supports Transaction mode (port 6543)
# ============================================

# Application Version
VERSION=latest

# ==========================================
# Domain Configuration (Required for HTTPS)
# ==========================================
# Your domain name - Caddy will automatically obtain SSL certificates
DOMAIN=servapp.latticeiq.net
# Email for Let's Encrypt certificate notifications
ACME_EMAIL=admin@latticeiq.net

# ==========================================
# Supabase Database Configuration (Required)
# ==========================================
# Get these values from your Supabase Dashboard:
# Project Settings > Database > Connection string

# Your Supabase project host (e.g., abc123xyz.supabase.co)
SUPABASE_HOST=YOUR_PROJECT_REF.supabase.co

# Database port - MUST be 6543 for Transaction mode (free tier)
# Session mode (5432) requires paid plan
SUPABASE_PORT=6543

# Database name (usually "postgres")
SUPABASE_DB=postgres

# Database user - format: postgres.YOUR_PROJECT_REF
# Get from: Project Settings > Database > Connection string
SUPABASE_USER=postgres.YOUR_PROJECT_REF

# Database password - from Supabase project creation
# Get from: Project Settings > Database > Database password
SUPABASE_PASSWORD=YOUR_SUPABASE_DATABASE_PASSWORD

# ==========================================
# JWT Configuration (Required)
# ==========================================
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_64_BYTE_BASE64_ENCODED_SECRET
JWT_EXPIRATION=86400000

# ==========================================
# URLs Configuration
# ==========================================
# API URL as seen from the browser (relative path for same-origin)
NEXT_PUBLIC_API_URL=/api

# ==========================================
# Spring Profile (IMPORTANT)
# ==========================================
# Use 'supabase' profile for Supabase PostgreSQL with PgBouncer
SPRING_PROFILES_ACTIVE=supabase

# ==========================================
# AWS SES Configuration (Email)
# ==========================================
# Leave empty to disable email sending
AWS_SES_REGION=eu-west-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_SES_FROM_EMAIL=noreply@servantin.ch
AWS_SES_FROM_NAME=Servantin

# ==========================================
# GCP Cloud Storage Configuration
# ==========================================
# Leave empty to disable file uploads
GCP_PROJECT_ID=
STORAGE_BUCKET=

# ==========================================
# Stripe Configuration (Payments)
# ==========================================
# Leave empty to disable payments
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=

# ==========================================
# Connection Pool Settings (Optional)
# ==========================================
# Keep these low for Supabase free tier to avoid connection limits
# Default values are optimized for free tier
HIKARI_MAX_POOL_SIZE=5
HIKARI_MIN_IDLE=1
